---
sidebar_position: 5
---

# 动作变量

在物品动作中，你可以使用[即时声明节点](随机节点/即时声明节点.md)，并通过特殊的物品节点调用物品的nbt及节点缓存。

## 节点一览

| 节点类型 | 含义 |
| :----: | :----: |
| nbt | 物品NBT |
| data | 物品节点内容 |
| amount | 物品数量 |
| type | 物品材质(比如STONE, DIAMOND) |
| damage | 物品子ID/损伤值 |
| 填写即时声明节点类型 | 可以使用所有即时声明节点(比如strings, weight) |

## 格式

`<节点类型::参数1_参数2_参数3...>`

即时声明节点无法指定节点ID, 如有需求，请配置私有/全局节点

节点参数中的`_`请用`\_`代替, 避免被当做参数分隔符, 这里的反斜杠不是转义符, 因此请注意当前最外层括号的引号类型

yaml语法中双引号包裹的`\`代表转义符, `\\`才是反斜杠

单引号包裹的, 或没有引号包裹的`\`直接代表反斜杠

我在此列举所有情况, 供你参考:

```yaml
# 返回 test1 或 test2 或 test3
test1: <strings::test1_test2_test3>
# 返回 test1_test2 或 test3
test2: <strings::test1\_test2_test3>

# 返回 test1 或 test2 或 test3
test3: '<strings::test1_test2_test3>'
# 返回 test1_test2 或 test3
test4: '<strings::test1\_test2_test3>'

# 返回 test1 或 test2 或 test3
test5: "<strings::test1_test2_test3>"
# 返回 test1?test2 或 test3 此处的?是一种特殊字符, 代表被转义的_
test6: "<strings::test1\_test2_test3>"
# 返回 test1_test2 或 test3
test7: "<strings::test1\\_test2_test3>"
```

:::caution

很多情况下下, 对于连续的反斜杠, 最终呈现的数量为"总数/2"向上取整

比如连续三个反斜杠, 除以2等于1.5, 向上取整后体现为2个

连续四个反斜杠, 除以2等于2, 向上取整后也体现为2个(因为2本来就是整数)

对于这种奇葩的操作, 我写一段示例:

```yaml
# 获取出来是 \
test1: \
# 获取出来是 \
test2: \\
# 获取出来是 \\
test3: \\\
# 获取出来是 \
test4: '\'
# 获取出来是 \
test5: '\\'
# 获取出来是 \\
test6: '\\\'
# 获取出来是 \
test7: "\\"
# 获取出来是 \
test8: "\\\\"
# 获取出来是 \\
test9: "\\\\\\"
```

具体是否遇到这种奇葩情况, 需要你自己判断, 我在此仅作提醒

:::

## 示例

以默认配置为例：

```yaml
actionTest:
  material: STONE
  nbt:
    test1: "666"
    test2: 
      test3: "777"
    test4:
    - "888"
    - "999"
  sections:
    test: "000"
```

```yaml
actionTest:
  all: 
  - "console: say 名为test1的NBT的值为: <nbt::test1>"
  - "console: say 名为test2.test3的NBT的值为: <nbt::test2.test3>"
  - "console: say 名为test4.0的NBT的值为: <nbt::test4.0>"
  - "console: say 名为test4.1的NBT的值为: <nbt::test4.1>"
  - "console: say 名为test的节点的值为: <data::test>"
  - "console: say 随机数尝试: <number::0_10_2>"
```

后台返回值如下

```
[Server] 名为test1的NBT的值为: 666
[Server] 名为test2.test3的NBT的值为: 777
[Server] 名为test4.0的NBT的值为: 888
[Server] 名为test4.1的NBT的值为: 999
[Server] 名为test的节点的值为: 000
[Server] 随机数尝试: 0.74
```

用法类似于即时声明节点，data表示调用节点，nbt表示调用物品nbt。

一层一层id以小数点`.`分隔

如果id中存在`.`, 请在书写时通过`\.`代替, 这里的反斜杠不是转义符, 因此请注意当前最外层括号的引号类型

如:

```yaml
actionTest:
  all: 
  - "console: say <nbt::te\\.st1.test2>"
  - 'console: say <nbt::te\.st1.test2>'
```

上面两行动作取的都是`te.st1`下的`test2`的值

yaml语法中双引号包裹的`\`代表转义符, `\\`才是反斜杠

单引号包裹的情况下则所见即所得
